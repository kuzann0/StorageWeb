<!DOCTYPE html>
<html>
<head>
  <title>StorageWeb</title>
  <link rel="stylesheet" href="style.css"> 
  <link rel="preconnect" href="https://fonts.googleapis.com"> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400&display=swap" rel="stylesheet"> 
  <link rel="stylesheet" href="style/style.css"> 
</head> 
<body>

  <div class="container"> 
    <h1>File Upload & Download</h1> 

    <form action="upload.php" method="post" enctype="multipart/form-data"> 
      <label for="fileToUpload">Select file to upload:</label><br> 
      <input type="file" name="fileToUpload" id="fileToUpload"><br><br> 
      <input type="submit" value="Upload File"> 
    </form> 

    <form action="download.php" method="post"> 
      <label for="filename">Enter file name:</label><br> 
      <input type="text" name="filename" id="filename"><br><br> 
      <input type="submit" value="Download File"> 
    </form> 

    <button id="listFilesButton">List Uploaded Files</button> 
    <div id="fileList"></div> 

  </div> 

  <script> 
    const listFilesButton = document.getElementById('listFilesButton'); 
    const fileListDiv = document.getElementById('fileList'); 

    listFilesButton.addEventListener('click', () => { 
      fetch('list_files.php') 
        .then(response => response.json()) 
        .then(data => { 
          fileListDiv.innerHTML = '';  
          if (data.files.length > 0) { 
            const list = document.createElement('ul'); 
            data.files.forEach(file => { 
              const listItem = document.createElement('li'); 
              const downloadLink = document.createElement('a'); 
              downloadLink.href = `download.php?filename=${file}`; 
              downloadLink.textContent = file; 
              listItem.appendChild(downloadLink); 
              list.appendChild(listItem); 
            }); 
            fileListDiv.appendChild(list); 
          } else { 
            fileListDiv.textContent = 'No files uploaded.'; 
          } 
        }) 
        .catch(error => { 
          console.error('Error fetching file list:', error); 
          fileListDiv.textContent = 'Error fetching file list.'; 
        }); 
    }); 
  </script> 

</body> 
</html>